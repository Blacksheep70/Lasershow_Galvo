#include <stdint.h>
#include <stdbool.h>
#include <math.h>
#include "inc/hw_ssi.h"
#include "driverlib/ssi.h"
#include "inc/hw_types.h"
#include "driverlib/sysctl.h"
#include "driverlib/gpio.h"
#include "inc/hw_sysctl.h"
#include "inc/hw_memmap.h"
#include "driverlib/timer.h"
#include "galvo.h"

/*
 * games.c
 *
 *  Created on: 22.05.2018
 *      Author: Alex
 */

uint16_t* convertFromVectorEdit(uint16_t x[], uint16_t length, uint8_t xORy){

    //Converting x -> xORy = 0
    //Converting y xORy = 1

    uint16_t counter;
    uint16_t y[length];
    for(counter = 0; counter < length; counter++)
        if(xORy == 0)
            y[counter] = x[counter] * 16.122047244094488188976377952756;
        else
            y[counter] = 4095 - x[counter] * 16.122047244094488188976377952756;
    return y;
}

void drawTestPattern(uint32_t ui32SysClkFreq){
    uint16_t t;
    uint16_t ildaTestPattern_x[]    =   {1241.39763779528, 1789.54724409449, 1789.54724409449, 2708.50393700787, 2708.50393700787, 2160.35433070866, 2079.74409448819, 2079.74409448819, 1999.13385826772, 1467.1062992126, 1418.74015748032, 1418.74015748032, 2644.0157480315, 2644.0157480315, 1418.74015748032, 499.783464566929, 2015.25590551181, 2015.25590551181, 2015.25590551181, 2015.25590551181, 3756.43700787402, 3643.58267716535, 2095.86614173228, 1983.01181102362, 1966.88976377953, 2111.98818897638, 2144.23228346457, 1950.76771653543, 1918.52362204724, 2192.59842519685, 1241.39763779528};
    uint16_t ildaTestPattern_y[]    =   {3691.94881889764, 3691.94881889764, 3546.85039370079, 3546.85039370079, 3337.26377952756, 3337.26377952756, 3385.62992125984, 3288.89763779528, 3337.26377952756, 3337.26377952756, 2740.74803149606, 1483.22834645669, 1483.22834645669, 2724.62598425197, 2724.62598425197, 2111.98818897638, 2111.98818897638, 2192.59842519685, 2031.37795275591, 2111.98818897638, 2111.98818897638, 2208.72047244094, 1418.74015748031, 1418.74015748031, 1273.64173228346, 1273.64173228346, 1128.54330708661, 1128.54330708661, 999.566929133858, 999.566929133858, 3691.94881889764};
    uint8_t ildaTestPattern_onOff[] =   {  0,  1,  0,  1,  0,  1,  0,  1,  0,  1,  0,  1,  1,  1,  1,  0,  1,  1,  1,  0,  1,  1,  0,  1,  0,  1,  0,  1,  0,  1,  0};
    uint8_t length                  =   31;
    uint16_t x0                     =   2015;
    uint16_t y0                     =   2080;
    uint16_t radius                 =   645;

    for(t = 0; t<length; t++){
            if(ildaTestPattern_onOff[t] != 0)
                drawLineBresenham(ildaTestPattern_x[t-1], ildaTestPattern_x[t], ildaTestPattern_y[t-1], ildaTestPattern_y[t]);
            else
                SSI0SendData_xy(ildaTestPattern_x[t], ildaTestPattern_y[t]);
        }
    drawCircleBresenham(x0, y0, radius, TOP_RIGHT | TOP_LEFT | BOTTOM_LEFT | BOTTOM_RIGHT);
}

void drawHTWGLogo(uint32_t ui32SysClkFreq){
    uint16_t logo_x[]       =   {257.952755905512,257.952755905512,274.074803149606,290.196850393701,322.44094488189,338.562992125984,338.562992125984,338.562992125984,451.417322834646,451.417322834646,451.417322834646,467.53937007874,499.783464566929,515.905511811024,532.027559055118,532.027559055118,515.905511811024,499.783464566929,483.661417322835,451.417322834646,451.417322834646,451.417322834646,338.562992125984,338.562992125984,338.562992125984,322.44094488189,290.196850393701,274.074803149606,257.952755905512,935.07874015748,935.07874015748,935.07874015748,951.200787401575,983.444881889764,999.566929133858,999.566929133858,999.566929133858,1096.29921259843,1112.42125984252,1112.42125984252,1128.54330708661,1128.54330708661,1096.29921259843,1080.17716535433,854.468503937008,822.224409448819,806.102362204724,822.224409448819,838.346456692913,886.712598425197,918.956692913386,1531.59448818898,1531.59448818898,1547.71653543307,1547.71653543307,1531.59448818898,822.224409448819,806.102362204724,773.858267716535,757.736220472441,757.736220472441,838.346456692913,854.468503937008,870.590551181102,886.712598425197,918.956692913386,935.07874015748,967.322834645669,1015.68897637795,1015.68897637795,1031.81102362205,1047.93307086614,1064.05511811024,1080.17716535433,1096.29921259843,1128.54330708661,1176.9094488189,1176.9094488189,1144.66535433071,1128.54330708661,1112.42125984252,1112.42125984252,1064.05511811024,999.566929133858,983.444881889764,951.200787401575,935.07874015748,870.590551181102,822.224409448819,1434.86220472441,1450.9842519685,1628.32677165354,1644.44881889764,1660.57086614173,1660.57086614173,1660.57086614173,1644.44881889764,1628.32677165354,1499.35039370079,1499.35039370079,1612.20472440945,1628.32677165354,1644.44881889764,1644.44881889764,1644.44881889764,1644.44881889764,1628.32677165354,1612.20472440945,1499.35039370079,1499.35039370079,1628.32677165354,1644.44881889764,1660.57086614173,1660.57086614173,1660.57086614173,1660.57086614173,1644.44881889764,1628.32677165354,1467.1062992126,1450.9842519685,1434.86220472441,1418.74015748032,1418.74015748032,1418.74015748032,1499.35039370079,1499.35039370079,1515.47244094488,1531.59448818898,1547.71653543307,1563.83858267717,1579.96062992126,1579.96062992126,1579.96062992126,1579.96062992126,1547.71653543307,1515.47244094488,1499.35039370079,1080.17716535433,1064.05511811024,1047.93307086614,1015.68897637795,983.444881889764,951.200787401575,902.834645669291,886.712598425197,870.590551181102,854.468503937008,838.346456692913,838.346456692913,838.346456692913,838.346456692913,854.468503937008,886.712598425197,902.834645669291,935.07874015748,967.322834645669,1015.68897637795,1047.93307086614,1064.05511811024,1080.17716535433,1096.29921259843,1096.29921259843,1080.17716535433,1064.05511811024,983.444881889764,967.322834645669,967.322834645669,967.322834645669,967.322834645669,967.322834645669,983.444881889764,1015.68897637795,1015.68897637795,1015.68897637795,983.444881889764,951.200787401575,918.956692913386,918.956692913386,918.956692913386,918.956692913386,935.07874015748,951.200787401575,983.444881889764,1015.68897637795,1031.81102362205,1047.93307086614,1080.17716535433,1096.29921259843,403.051181102362,419.173228346457,403.051181102362,386.929133858268,386.929133858268,257.952755905512};
    uint16_t logo_y[]       =   {3337.26377952756,2756.87007874016,2740.74803149606,2724.62598425197,2724.62598425197,2756.87007874016,2805.23622047244,2998.70078740157,2998.70078740157,2772.99212598425,2756.87007874016,2724.62598425197,2724.62598425197,2740.74803149606,2772.99212598425,3353.38582677165,3385.62992125984,3401.75196850394,3417.87401574803,3385.62992125984,3337.26377952756,3127.67716535433,3127.67716535433,3353.38582677165,3385.62992125984,3401.75196850394,3417.87401574803,3401.75196850394,3353.38582677165,3288.89763779528,2772.99212598425,2740.74803149606,2724.62598425197,2724.62598425197,2740.74803149606,2772.99212598425,3288.89763779528,3288.89763779528,3305.01968503937,3321.14173228346,3353.38582677165,3385.62992125984,3401.75196850394,3417.87401574803,3417.87401574803,3401.75196850394,3353.38582677165,3321.14173228346,3288.89763779528,3288.89763779528,3288.89763779528,3063.18897637795,3079.31102362205,3079.31102362205,3063.18897637795,3047.06692913386,2353.8188976378,2386.06299212598,2386.06299212598,2353.8188976378,2321.57480314961,1741.1811023622,1708.93700787402,1708.93700787402,1708.93700787402,1725.05905511811,1789.54724409449,2128.11023622047,1773.42519685039,1741.1811023622,1725.05905511811,1708.93700787402,1708.93700787402,1708.93700787402,1757.3031496063,2015.25590551181,2337.6968503937,2369.94094488189,2386.06299212598,2386.06299212598,2369.94094488189,2337.6968503937,1950.76771653543,2369.94094488189,2386.06299212598,2386.06299212598,2369.94094488189,1966.88976377953,2337.6968503937,2369.94094488189,2386.06299212598,2386.06299212598,2369.94094488189,2353.8188976378,2321.57480314961,2305.45275590551,2289.33070866142,2257.08661417323,2257.08661417323,2095.86614173228,2095.86614173228,2095.86614173228,2079.74409448819,2063.62204724409,2031.37795275591,2015.25590551181,1983.01181102362,1983.01181102362,1983.01181102362,1821.79133858268,1821.79133858268,1805.66929133858,1789.54724409449,1773.42519685039,1757.3031496063,1725.05905511811,1708.93700787402,1692.81496062992,1692.81496062992,1708.93700787402,1725.05905511811,1757.3031496063,2321.57480314961,2353.8188976378,1305.88582677165,709.370078740157,693.248031496063,677.125984251968,677.125984251968,677.125984251968,693.248031496063,709.370078740157,1305.88582677165,1338.12992125984,1354.25196850394,1354.25196850394,1338.12992125984,1289.76377952756,1322.00787401575,1338.12992125984,1354.25196850394,1354.25196850394,1354.25196850394,1338.12992125984,1322.00787401575,1273.64173228346,1225.27559055118,1128.54330708661,1047.93307086614,854.468503937008,806.102362204724,757.736220472441,725.492125984252,693.248031496063,677.125984251968,661.003937007874,661.003937007874,677.125984251968,709.370078740157,741.614173228346,773.858267716535,1031.81102362205,1064.05511811024,1080.17716535433,1080.17716535433,1064.05511811024,1031.81102362205,1015.68897637795,999.566929133858,983.444881889764,967.322834645669,951.200787401575,902.834645669291,806.102362204724,789.98031496063,806.102362204724,854.468503937008,918.956692913386,1096.29921259843,1144.66535433071,1193.03149606299,1225.27559055118,1241.39763779528,1225.27559055118,1209.15354330709,1193.03149606299,1209.15354330709,1273.64173228346,1031.81102362205,1015.68897637795,983.444881889764,999.566929133858,1031.81102362205,3337.26377952756};
    uint16_t logo_onOff[]   =   {  0,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  0,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  0,  1,  1,  1,  1,  0,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  0,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  0,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  0,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  0,  1,  1,  1,  1,  0};
    uint8_t length          =   194;
    uint8_t t;

    for(t=0; t<length; t++)
        if(logo_onOff[t] == 0)
            SSI0SendData_xy(logo_x[t], logo_y[t]);
        else
            plotLine(logo_x[t-1], logo_x[t], logo_y[t-1], logo_y[t], ui32SysClkFreq);
}



